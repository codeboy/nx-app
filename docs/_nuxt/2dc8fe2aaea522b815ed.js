(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{189:function(e,t,r){"use strict";r.r(t);r(65),r(38);var n=r(5),o=(r(64),{data:function(){return{ip:0,m_data:"...",apiKey:"91cdacc232f75adf9e2f4d7310983bdd",isFullPage:!0,tableLoading:!0,url:"https://api.themoviedb.org/3/discover/movie",table:{data:[],loading:!0,sortField:"vote_count",sortOrder:"desc",defaultSortOrder:"desc",total:0,perPage:20,isEmpty:!1,isBordered:!1,isStriped:!0,isNarrowed:!1,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0}}},head:{title:"Async Table"},methods:{getToken:function(){return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},callapi:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.table.loading=!0,r=["api_key=".concat(e.apiKey),"language=en-US","include_adult=true","include_video=false","sort_by=".concat(e.table.sortField,".").concat(e.table.sortOrder),"page=".concat(e.table.page)].join("&"),console.log(r),e.table.data=[],t.prev=4,t.next=7,e.$axios.$get("".concat(e.url,"?").concat(r));case 7:n=t.sent,e.m_data=n,o=n.total_results,n.total_results/e.table.perPage>1e3&&(o=1e3*e.table.perPage),e.table.total=o,n.results.forEach((function(t){t.release_date=t.release_date?t.release_date.replace(/-/g,"/"):null,e.table.data.push(t)})),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),console.error("ERROR! "+t.t0),e.msgDanger();case 19:e.table.loading=!1;case 20:case"end":return t.stop()}}),t,null,[[4,15]])})))()},onPageChange:function(e){this.table.page=e,this.callapi()},onSort:function(e,t){this.table.sortField=e,this.table.sortOrder=t,this.callapi()},type:function(e){var t=parseFloat(e);return t<6?"is-danger":t>=6&&t<8?"is-warning":t>=8?"is-success":void 0},msgDanger:function(){this.$buefy.notification.open({duration:1e3,message:"Error while loading",position:"is-top-right",type:"is-danger",hasIcon:!0})}},filters:{truncate:function(e,t){return e.length>t?e.substr(0,t)+"...":e}},mounted:function(){this.callapi()}}),l=r(15),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"section"},[r("h2",{staticClass:"title is-3 has-text-grey"},[e._v("\n    Table load by async axios.\n  ")]),e._v(" "),r("p",[e._v("Sortable and paginate by server")]),e._v(" "),r("b-collapse",{attrs:{open:!1,"aria-id":"contentIdForA11y1"}},[r("button",{staticClass:"button is-primary",attrs:{slot:"trigger","aria-controls":"contentIdForA11y1"},slot:"trigger"},[e._v("Show raw data")]),e._v(" "),r("div",{staticClass:"notification"},[r("div",{staticClass:"content"},[r("h3",[e._v("\n          Db data\n        ")]),e._v(" "),r("p",{staticClass:"container"},[e._v("\n          data - "+e._s(e.m_data)+"\n        ")])])])]),e._v(" "),r("section",[r("b-table",{attrs:{data:e.table.data,loading:e.table.loading,paginated:"","backend-pagination":"",total:e.table.total,"per-page":e.table.perPage,"aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page","backend-sorting":"","default-sort-direction":e.table.defaultSortOrder,"default-sort":[e.table.sortField,e.table.sortOrder]},on:{"page-change":e.onPageChange,sort:e.onSort},scopedSlots:e._u([{key:"default",fn:function(t){return[r("b-table-column",{attrs:{field:"original_title",label:"Title",sortable:""}},[e._v("\n          "+e._s(t.row.original_title)+"\n        ")]),e._v(" "),r("b-table-column",{attrs:{field:"vote_average",label:"Vote Average",numeric:"",sortable:""}},[r("span",{staticClass:"tag",class:e.type(t.row.vote_average)},[e._v("\n                      "+e._s(t.row.vote_average)+"\n                  ")])]),e._v(" "),r("b-table-column",{attrs:{field:"vote_count",label:"Vote Count",numeric:"",sortable:""}},[e._v("\n          "+e._s(t.row.vote_count)+"\n        ")]),e._v(" "),r("b-table-column",{attrs:{field:"release_date",label:"Release Date",sortable:"",centered:""}},[e._v("\n          "+e._s(t.row.release_date?new Date(t.row.release_date).toLocaleDateString():"unknown")+"\n        ")]),e._v(" "),r("b-table-column",{attrs:{label:"Overview",width:"500"}},[e._v("\n          "+e._s(e._f("truncate")(t.row.overview,80))+"\n        ")])]}}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);